!function($){"use strict";var addToAttribute=function(obj,array,value){for(var i=0,length=array.length;length>i;i++)obj=obj[array[i]]=obj[array[i]]||i==length-1?value:{}};$.fn.toggleButtons=function(method){var $element,$div,transitionSpeed=.05,methods={init:function(opt){return this.each(function(){var $spanLeft,$spanRight,options,moving,dataAttribute={};if($element=$(this),$element.addClass("toggle-button"),$.each($element.data(),function(i,el){var key,tmp={};if(0===i.indexOf("togglebutton"))key=i.match(/[A-Z][a-z]+/g),key=jQuery.map(key,function(n){return n.toLowerCase()}),addToAttribute(tmp,key,el),dataAttribute=$.extend(!0,dataAttribute,tmp)}),options=$.extend(!0,{},$.fn.toggleButtons.defaults,opt,dataAttribute),$(this).data("options",options),$spanLeft=$("<span></span>").addClass("labelLeft").text(void 0===options.label.enabled?"ON":options.label.enabled),$spanRight=$("<span></span>").addClass("labelRight").text(void 0===options.label.disabled?"OFF ":options.label.disabled),$div=$element.find("input").wrap($("<div></div>")).parent(),$div.append($spanLeft),$div.append($("<label></label>").attr("for",$element.find("input").attr("id"))),$div.append($spanRight),$element.find("input").is(":checked"))$element.find(">div").css("left","0");else $element.find(">div").css("left","-50%");if(options.animated){if(void 0!==options.transitionspeed)if(/^(\d*%$)/.test(options.transitionspeed))transitionSpeed=.05*parseInt(options.transitionspeed)/100;else transitionSpeed=options.transitionspeed}else transitionSpeed=0;if($(this).data("transitionSpeed",1e3*transitionSpeed),options.width/=2,$element.css("width",2*options.width).find(">div").css("width",3*options.width).find(">span, >label").css("width",options.width),$element.css("height",options.height).find("span, label").css("height",options.height).filter("span").css("line-height",options.height+"px"),$element.find("input").is(":disabled"))$(this).addClass("deactivate");if($element.find("span").css(options.font),void 0===options.style.enabled){if(void 0!==options.style.custom&&void 0!==options.style.custom.enabled&&void 0!==options.style.custom.enabled.background)if($spanLeft.css("color",options.style.custom.enabled.color),void 0===options.style.custom.enabled.gradient)$spanLeft.css("background",options.style.custom.enabled.background);else $.each(["-webkit-","-moz-","-o-",""],function(i,el){$spanLeft.css("background-image",el+"linear-gradient(top, "+options.style.custom.enabled.background+","+options.style.custom.enabled.gradient+")")})}else $spanLeft.addClass(options.style.enabled);if(void 0===options.style.disabled){if(void 0!==options.style.custom&&void 0!==options.style.custom.disabled&&void 0!==options.style.custom.disabled.background)if($spanRight.css("color",options.style.custom.disabled.color),void 0===options.style.custom.disabled.gradient)$spanRight.css("background",options.style.custom.disabled.background);else $.each(["-webkit-","-moz-","-o-",""],function(i,el){$spanRight.css("background-image",el+"linear-gradient(top, "+options.style.custom.disabled.background+","+options.style.custom.disabled.gradient+")")})}else $spanRight.addClass(options.style.disabled);var changeStatus=function($this){$this.siblings("label").trigger("mousedown").trigger("mouseup").trigger("click")};$spanLeft.on("click",function(e){changeStatus($(this))}),$spanRight.on("click",function(e){changeStatus($(this))}),$(".toggle-button").find("input").on("change",function(e){var $element=$(this).parent(),active=$(this).is(":checked"),$toggleButton=$(this).closest(".toggle-button");e.preventDefault(),e.stopImmediatePropagation(),$element.stop().animate({left:active?"0":"-50%"},$toggleButton.data("transitionSpeed")),options=$toggleButton.data("options"),options.onChange($element,active,e)}),$(".toggle-button").find("label").on("mousedown",function(e){if(moving=!1,e.preventDefault(),e.stopImmediatePropagation(),$(this).closest(".toggle-button").is(".deactivate"))$(this).unbind("click");else $(this).on("mousemove",function(e){var $element=$(this).closest(".toggle-button"),relativeX=e.pageX-$element.offset().left,percent=relativeX/(2*options.width)*100;if(moving=!0,25>percent)percent=25;else if(percent>75)percent=75;$element.find(">div").css("left",percent-75+"%")}),$(this).on("click",function(e){var $target=$(e.target),$myCheckBox=$target.siblings("input");if(e.stopImmediatePropagation(),e.preventDefault(),$(this).unbind("mouseleave"),moving)if(parseInt($(this).parent().css("left"))<-25)$myCheckBox.attr("checked",!1);else $myCheckBox.attr("checked",!0);else $myCheckBox.attr("checked",!$myCheckBox.is(":checked"));$myCheckBox.trigger("change")}),$(this).on("mouseleave",function(e){var $myCheckBox=$(this).siblings("input");if(e.preventDefault(),e.stopImmediatePropagation(),$(this).unbind("mouseleave"),$(this).trigger("mouseup"),parseInt($(this).parent().css("left"))<-25)$myCheckBox.attr("checked",!1);else $myCheckBox.attr("checked",!0);$myCheckBox.trigger("change")}),$(this).on("mouseup",function(e){e.stopImmediatePropagation(),e.preventDefault(),$(this).unbind("mousemove")})})}),this},toggleActivation:function(){$(this).toggleClass("deactivate")},toggleState:function(){var $input=$(this).find("input");$input.attr("checked",!$input.is(":checked")).trigger("change")},setState:function(value){$(this).find("input").attr("checked",value).trigger("change")}};if(methods[method])return methods[method].apply(this,Array.prototype.slice.call(arguments,1));else if("object"==typeof method||!method)return methods.init.apply(this,arguments);else $.error("Method "+method+" does not exist!")},$.fn.toggleButtons.defaults={onChange:function(){},width:100,height:25,font:{},animated:!0,transitionspeed:void 0,label:{enabled:void 0,disabled:void 0},style:{enabled:void 0,disabled:void 0,custom:{enabled:{background:void 0,gradient:void 0,color:"#FFFFFF"},disabled:{background:void 0,gradient:void 0,color:"#FFFFFF"}}}}}($);